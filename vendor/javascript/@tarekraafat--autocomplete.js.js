// @tarekraafat/autocomplete.js@10.2.9 downloaded from https://ga.jspm.io/npm:@tarekraafat/autocomplete.js@10.2.9/dist/autoComplete.min.js

var m=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:global;var v={};var y;y=function(){function t(m,v){(null==v||v>m.length)&&(v=m.length);for(var y=0,x=Array(v);y<v;y++)x[y]=m[y];return x}function e(m,v,y){return(v=function(m){var v=function(m,v){if("object"!=typeof m||!m)return m;var y=m[Symbol.toPrimitive];if(void 0!==y){var x=y.call(m,v||"default");if("object"!=typeof x)return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===v?String:Number)(m)}(m,"string");return"symbol"==typeof v?v:v+""}(v))in m?Object.defineProperty(m,v,{value:y,enumerable:!0,configurable:!0,writable:!0}):m[v]=y,m}function n(m,v){var y=Object.keys(m);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(m);v&&(x=x.filter((function(v){return Object.getOwnPropertyDescriptor(m,v).enumerable}))),y.push.apply(y,x)}return y}function r(m){for(var v=1;v<arguments.length;v++){var y=null!=arguments[v]?arguments[v]:{};v%2?n(Object(y),!0).forEach((function(v){e(m,v,y[v])})):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(y)):n(Object(y)).forEach((function(v){Object.defineProperty(m,v,Object.getOwnPropertyDescriptor(y,v))}))}return m}function i(m){return function(m){if(Array.isArray(m))return t(m)}(m)||function(m){if("undefined"!=typeof Symbol&&null!=m[Symbol.iterator]||null!=m["@@iterator"])return Array.from(m)}(m)||s(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(m){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},o(m)}function s(m,v){if(m){if("string"==typeof m)return t(m,v);var y={}.toString.call(m).slice(8,-1);return"Object"===y&&m.constructor&&(y=m.constructor.name),"Map"===y||"Set"===y?Array.from(m):"Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?t(m,v):void 0}}var u=function(m){return"string"==typeof m?document.querySelector(m):m()},a=function(m,v){var y="string"==typeof m?document.createElement(m):m;for(var x in v){var I=v[x];if("inside"===x)I.append(y);else if("dest"===x)u(I[0]).insertAdjacentElement(I[1],y);else if("around"===x){var H=I;H.parentNode.insertBefore(y,H),y.append(H),null!=H.getAttribute("autofocus")&&H.focus()}else x in y?y[x]=I:y.setAttribute(x,I)}return y},c=function(m,v){return m=String(m).toLowerCase(),v?m.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):m},l=function(m,v){return a("mark",r({innerHTML:m},"string"==typeof v&&{class:v})).outerHTML},f=function(m,v){v.input.dispatchEvent(new CustomEvent(m,{bubbles:!0,detail:v.feedback,cancelable:!0}))},p=function(m,v,y){var x=y||{},I=x.mode,H=x.diacritics,C=x.highlight,D=c(v,H);if(v=String(v),m=c(m,H),"loose"===I){var M=(m=m.replace(/ /g,"")).length,N=0,q=Array.from(v).map((function(v,y){return N<M&&D[y]===m[N]&&(v=C?l(v,C):v,N++),v})).join("");if(N===M)return q}else{var _=D.indexOf(m);if(~_)return m=v.substring(_,_+m.length),C?v.replace(m,l(m,C)):v}},d=function(m,v){return new Promise((function(y,x){var I;return(I=m.data).cache&&I.store?y():new Promise((function(m,y){return"function"==typeof I.src?new Promise((function(m,y){return"AsyncFunction"===I.src.constructor.name?I.src(v).then(m,y):m(I.src(v))})).then(m,y):m(I.src)})).then((function(v){try{return m.feedback=I.store=v,f("response",m),y()}catch(m){return x(m)}}),x)}))},h=function(m,v){var y=v.data,x=v.searchEngine,I=[];y.store.forEach((function(H,C){var a=function(y){var C=y?H[y]:H,D="function"==typeof x?x(m,C):p(m,C,{mode:x,diacritics:v.diacritics,highlight:v.resultItem.highlight});if(D){var M={match:D,value:H};y&&(M.key=y),I.push(M)}};if(y.keys){var D,M=function(m,v){var y="undefined"!=typeof Symbol&&m[Symbol.iterator]||m["@@iterator"];if(!y){if(Array.isArray(m)||(y=s(m))||v){y&&(m=y);var x=0,i=function(){};return{s:i,n:function(){return x>=m.length?{done:!0}:{done:!1,value:m[x++]}},e:function(m){throw m},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var I,H=!0,C=!1;return{s:function(){y=y.call(m)},n:function(){var m=y.next();return H=m.done,m},e:function(m){C=!0,I=m},f:function(){try{H||null==y.return||y.return()}finally{if(C)throw I}}}}(y.keys);try{for(M.s();!(D=M.n()).done;)a(D.value)}catch(m){M.e(m)}finally{M.f()}}else a()})),y.filter&&(I=y.filter(I));var H=I.slice(0,v.resultsList.maxResults);v.feedback={query:m,matches:I,results:H},f("results",v)},v="aria-expanded",y="aria-activedescendant",x="aria-selected",b=function(m,v){m.feedback.selection=r({index:v},m.feedback.results[v])},g=function(m){m.isOpen||((m.wrapper||m.input).setAttribute(v,!0),m.list.removeAttribute("hidden"),m.isOpen=!0,f("open",m))},w=function(m){m.isOpen&&((m.wrapper||m.input).setAttribute(v,!1),m.input.setAttribute(y,""),m.list.setAttribute("hidden",""),m.isOpen=!1,f("close",m))},O=function(m,v){var I=v.resultItem,H=v.list.getElementsByTagName(I.tag),C=!!I.selected&&I.selected.split(" ");if(v.isOpen&&H.length){var D,M,N=v.cursor;m>=H.length&&(m=0),m<0&&(m=H.length-1),v.cursor=m,N>-1&&(H[N].removeAttribute(x),C&&(M=H[N].classList).remove.apply(M,i(C))),H[m].setAttribute(x,!0),C&&(D=H[m].classList).add.apply(D,i(C)),v.input.setAttribute(y,H[v.cursor].id),v.list.scrollTop=H[m].offsetTop-v.list.clientHeight+H[m].clientHeight+5,v.feedback.cursor=v.cursor,b(v,m),f("navigate",v)}},A=function(m){O(m.cursor+1,m)},S=function(m){O(m.cursor-1,m)},j=function(m,v,y){(y=y>=0?y:m.cursor)<0||(m.feedback.event=v,b(m,y),f("selection",m),w(m))};function k(v,y){var x=this||m;return new Promise((function(m,I){var H,C;return H=y||((C=v.input)instanceof HTMLInputElement||C instanceof HTMLTextAreaElement?C.value:C.innerHTML),function(m,v,y){return v?v(m):m.length>=y}(H=v.query?v.query(H):H,v.trigger,v.threshold)?d(v,H).then((function(y){try{return v.feedback instanceof Error?m():(h(H,v),v.resultsList&&function(m){var v=m.resultsList,y=m.list,x=m.resultItem,I=m.feedback,H=I.matches,C=I.results;if(m.cursor=-1,y.innerHTML="",H.length||v.noResults){var D=new DocumentFragment;C.forEach((function(m,v){var y=a(x.tag,r({id:"".concat(x.id,"_").concat(v),role:"option",innerHTML:m.match,inside:D},x.class&&{class:x.class}));x.element&&x.element(y,m)})),y.append(D),v.element&&v.element(y,I),g(m)}else w(m)}(v),c.call(x))}catch(m){return I(m)}}),I):(w(v),c.call(x));function c(){return m()}}))}var L=function(m,v){for(var y in m)for(var x in m[y])v(y,x)},T=function(m){var v,y,x,I=m.events,H=(v=function(){return k(m)},y=m.debounce,function(){clearTimeout(x),x=setTimeout((function(){return v()}),y)}),C=m.events=r({input:r({},I&&I.input)},m.resultsList&&{list:I?r({},I.list):{}}),D={input:{input:function(){H()},keydown:function(v){!function(m,v){switch(m.keyCode){case 40:case 38:m.preventDefault(),40===m.keyCode?A(v):S(v);break;case 13:v.submit||m.preventDefault(),v.cursor>=0&&j(v,m);break;case 9:v.resultsList.tabSelect&&v.cursor>=0&&j(v,m);break;case 27:v.input.value="",f("clear",v),w(v)}}(v,m)},blur:function(){w(m)}},list:{mousedown:function(m){m.preventDefault()},click:function(v){!function(m,v){var y=v.resultItem.tag.toUpperCase(),x=Array.from(v.list.querySelectorAll(y)),I=m.target.closest(y);I&&I.nodeName===y&&j(v,m,x.indexOf(I))}(v,m)}}};L(D,(function(v,y){(m.resultsList||"input"===y)&&(C[v][y]||(C[v][y]=D[v][y]))})),L(C,(function(v,y){m[v].addEventListener(y,C[v][y])}))};function E(v){var y=this||m;return new Promise((function(m,x){var I,H,C;if(I=v.placeHolder,C={role:"combobox","aria-owns":(H=v.resultsList).id,"aria-haspopup":!0,"aria-expanded":!1},a(v.input,r(r({"aria-controls":H.id,"aria-autocomplete":"both"},I&&{placeholder:I}),!v.wrapper&&r({},C))),v.wrapper&&(v.wrapper=a("div",r({around:v.input,class:v.name+"_wrapper"},C))),H&&(v.list=a(H.tag,r({dest:[H.destination,H.position],id:H.id,role:"listbox",hidden:"hidden"},H.class&&{class:H.class}))),T(v),v.data.cache)return d(v).then((function(m){try{return c.call(y)}catch(m){return x(m)}}),x);function c(){return f("init",v),m()}return c.call(y)}))}function P(v){var y=v.prototype;y.init=function(){E(this||m)},y.start=function(v){k(this||m,v)},y.unInit=function(){if((this||m).wrapper){var v=(this||m).wrapper.parentNode;v.insertBefore((this||m).input,(this||m).wrapper),v.removeChild((this||m).wrapper)}var y;L((y=this||m).events,(function(m,v){y[m].removeEventListener(v,y.events[m][v])}))},y.open=function(){g(this||m)},y.close=function(){w(this||m)},y.goTo=function(v){O(v,this||m)},y.next=function(){A(this||m)},y.previous=function(){S(this||m)},y.select=function(v){j(this||m,null,v)},y.search=function(m,v,y){return p(m,v,y)}}return function t(v){(this||m).options=v,(this||m).id=t.instances=(t.instances||0)+1,(this||m).name="autoComplete",(this||m).wrapper=1,(this||m).threshold=1,(this||m).debounce=0,(this||m).resultsList={position:"afterend",tag:"ul",maxResults:5},(this||m).resultItem={tag:"li"},function(m){var v=m.name,y=m.options,x=m.resultsList,I=m.resultItem;for(var H in y)if("object"===o(y[H]))for(var C in m[H]||(m[H]={}),y[H])m[H][C]=y[H][C];else m[H]=y[H];m.selector=m.selector||"#"+v,x.destination=x.destination||m.selector,x.id=x.id||v+"_list_"+m.id,I.id=I.id||v+"_result",m.input=u(m.selector)}(this||m),P.call(this||m,t),E(this||m)}},v=y();var x=v;export{x as default};

